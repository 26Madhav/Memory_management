# Virtual Memory Design

This document describes how virtual memory is modeled in the simulator.
The goal is to show how address translation works using paging,
without focusing on hardware-level details.

---

## Virtual Address Model

The simulator uses a paging-based virtual memory model.
Each virtual address is divided into two parts:

- Virtual Page Number 
- Page Offset

The page offset remains unchanged during address translation.

---

## Page Table Structure

Virtual-to-physical mapping is handled using a page table.
Each page table entry contains:

- A valid bit indicating whether the page is present in memory
- A physical frame number
- Replacement-related metadata

If a page table entry is invalid, the page is treated as not present
in physical memory.

---

## Address Translation

Address translation follows a simple and clear flow:

1. A virtual address is generated by the simulated process.
2. The virtual page number is used to index the page table.
3. If the entry is valid, a physical address is constructed using
   the frame number and page offset.
4. The resulting physical address is then sent to the cache hierarchy.

Virtual memory and cache access are handled as separate steps.

---

## Page Replacement

When physical memory is full and a new page needs to be loaded,
a page replacement policy is used.

Replacement metadata is stored in page table entries and updated
on each page access.

The specific replacement policy is kept simple to focus on
translation correctness rather than performance tuning.

---

## Separation from Cache

Virtual memory is responsible for address translation and mapping,
while caches are responsible for speeding up memory access.

The simulator does not cache page table entries.
Address translation is always performed before cache lookup.

---

## Design Choices and Simplifications

- The simulator models a single-level page table.
- Translation Lookaside Buffers (TLBs) are not implemented.
- Page faults are handled logically without timing or I/O effects.
- Multi-process isolation is not modeled.

These simplifications help keep the virtual memory design easy
to understand while preserving core concepts.
